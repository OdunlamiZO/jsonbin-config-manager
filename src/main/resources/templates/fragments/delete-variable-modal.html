<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:fragment="deleteVariableModal">
  <div
    id="delete-variable-modal"
    class="hidden fixed inset-0 bg-primary-dark bg-opacity-70 justify-center items-center z-50"
  >
    <div class="bg-white p-6 rounded-lg w-1/3 relative">
      <button
        class="absolute top-3 right-3 text-primary-base hover:text-primary-dark"
        onclick="closeDeleteVariableModal()"
        type="button"
        aria-label="Close"
      >
        âœ•
      </button>

      <div class="space-y-2 mb-6">
        <h1 class="text-lg font-semibold text-primary-dark">Delete Variable</h1>

        <p class="text-sm text-primary-base">
          Are you sure you want to delete the variable
          <span class="font-semibold" id="delete-variable-key"></span>? This
          action cannot be undone.
        </p>
      </div>

      <form id="delete-variable-form" method="post">
        <input
          type="hidden"
          th:name="${_csrf.parameterName}"
          th:value="${_csrf.token}"
        />

        <div class="flex justify-end gap-3">
          <button
            type="button"
            onclick="closeDeleteVariableModal()"
            class="w-28 px-4 py-2 rounded font-medium bg-primary-light text-primary-dark border border-primary-mid hover:bg-primary-mid transition-colors"
          >
            Cancel
          </button>

          <button
            type="submit"
            class="w-28 px-4 py-2 rounded font-medium bg-red-bg text-red-text border border-red-border hover:bg-red-bg-hover hover:text-red-text-hover hover:border-red-border-hover transition-colors"
          >
            Delete
          </button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Opens the delete variable modal and sets the form action and variable key
    function openDeleteVariableModalFromBtn(btn) {
      // Get modal, form, and key display elements
      const modal = document.getElementById("delete-variable-modal");
      const form = document.getElementById("delete-variable-form");
      const keySpan = document.getElementById("delete-variable-key");

      // Set the form action URL and display the variable key to be deleted
      form.action = btn.dataset.actionUrl;
      keySpan.textContent = btn.dataset.key;

      // Show the modal by updating its classes
      modal.classList.remove("hidden");
      modal.classList.add("flex");
    }

    // Closes the delete variable modal
    function closeDeleteVariableModal() {
      // Get the modal element
      const modal = document.getElementById("delete-variable-modal");
      // Hide the modal by updating its classes
      modal.classList.add("hidden");
      modal.classList.remove("flex");
    }
  </script>
</html>
