<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:fragment="deleteConfirmModal">
  <div
    id="delete-confirm-modal"
    class="hidden fixed inset-0 bg-primary-dark bg-opacity-70 justify-center items-center z-50"
  >
    <div class="bg-white p-6 rounded-lg w-full max-w-md relative">
      <button
        class="absolute top-3 right-3 text-primary-base hover:text-primary-dark"
        onclick="closeDeleteConfirmModal()"
        type="button"
        aria-label="Close"
      >
        âœ•
      </button>

      <div class="space-y-2 mb-6">
        <h1
          class="text-lg font-semibold text-primary-dark"
          id="delete-confirm-title"
        >
          Delete
        </h1>
        <p class="text-sm text-primary-base">
          <span id="delete-confirm-message"
            >Are you sure you want to delete this item? This action cannot be
            undone.</span
          >
        </p>
      </div>

      <form id="delete-confirm-form" method="post">
        <input
          type="hidden"
          th:name="${_csrf.parameterName}"
          th:value="${_csrf.token}"
        />

        <div class="flex justify-end gap-3">
          <button
            type="button"
            onclick="closeDeleteConfirmModal()"
            class="w-28 px-4 py-2 rounded font-medium bg-primary-light text-primary-dark border border-primary-mid hover:bg-primary-mid transition-colors"
          >
            Cancel
          </button>

          <button
            type="submit"
            class="w-28 px-4 py-2 rounded font-medium bg-red-bg text-red-text border border-red-border hover:bg-red-bg-hover hover:text-red-text-hover hover:border-red-border-hover transition-colors"
          >
            Delete
          </button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Show the generic delete confirmation modal and set its content
    function openDeleteConfirmModal({ actionUrl, title, message }) {
      const modal = document.getElementById("delete-confirm-modal");
      const form = document.getElementById("delete-confirm-form");
      const titleEl = document.getElementById("delete-confirm-title");
      const messageEl = document.getElementById("delete-confirm-message");
      form.action = actionUrl;
      if (title) titleEl.textContent = title;
      if (message) messageEl.innerHTML = message;
      modal.classList.remove("hidden");
      modal.classList.add("flex");
    }

    // Hide the generic delete confirmation modal
    function closeDeleteConfirmModal() {
      const modal = document.getElementById("delete-confirm-modal");
      modal.classList.add("hidden");
      modal.classList.remove("flex");
    }
  </script>
</html>
