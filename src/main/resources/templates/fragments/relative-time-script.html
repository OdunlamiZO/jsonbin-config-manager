<th:block th:fragment="relativeTimeScript">
  <script src="https://unpkg.com/dayjs/dayjs.min.js"></script>
  <script src="https://unpkg.com/dayjs/plugin/relativeTime.js"></script>
  <script th:inline="javascript">
    // Extend dayjs with the relativeTime plugin
    dayjs.extend(dayjs_plugin_relativeTime);

    // Update all elements with class .relative-date to show relative time
    function updateRelativeDates(selector = ".relative-date") {
      const elements = document.querySelectorAll(selector);
      elements.forEach((el) => {
        const isoDate = el.dataset.createdAt;
        if (isoDate) {
          el.textContent = dayjs(isoDate).fromNow();
        }
      });
    }

    // Run updateRelativeDates on page load
    document.addEventListener("DOMContentLoaded", function () {
      updateRelativeDates();
    });

    window.updateRelativeDates = updateRelativeDates;
  </script>
</th:block>
